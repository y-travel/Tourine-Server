--
-- Script was generated by Devart dbForge Studio for SQL Server, Version 5.3.56.0
-- Product home page: http://www.devart.com/dbforge/sql/studio
-- Script date 1/8/2018 6:39:57 PM
-- Server version: 13.00.4001
-- Client version: 
--



USE Tourine
GO

IF DB_NAME() <> N'Tourine' SET NOEXEC ON
GO

--
-- Create table "dbo.VersionInfo"
--
PRINT (N'Create table "dbo.VersionInfo"')
GO
CREATE TABLE dbo.VersionInfo (
  Version bigint NOT NULL,
  AppliedOn datetime NULL,
  Description nvarchar(1024) NULL
)
ON [PRIMARY]
GO

--
-- Create index "UC_Version" on table "dbo.VersionInfo"
--
PRINT (N'Create index "UC_Version" on table "dbo.VersionInfo"')
GO
CREATE UNIQUE CLUSTERED INDEX UC_Version
  ON dbo.VersionInfo (Version)
  ON [PRIMARY]
GO

--
-- Create table "dbo.[User]"
--
PRINT (N'Create table "dbo.[User]"')
GO
CREATE TABLE dbo.[User] (
  ID uniqueidentifier NOT NULL,
  Name nvarchar(50) NULL,
  RoleID int NULL,
  CONSTRAINT PK_User_ID PRIMARY KEY CLUSTERED (ID)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Tour"
--
PRINT (N'Create table "dbo.Tour"')
GO
CREATE TABLE dbo.Tour (
  ID uniqueidentifier NOT NULL,
  Code nvarchar(50) NULL,
  DestinationID uniqueidentifier NULL,
  Capacity int NULL,
  StatusID int NULL,
  PriceDetailID uniqueidentifier NULL,
  Duration int NULL,
  Date datetime NULL,
  PlaceID uniqueidentifier NULL,
  isFlight bit NULL,
  AdultCount int NULL,
  AdultMinPrice int NULL,
  BusPrice int NULL,
  RoomPrice int NULL,
  FoodPrice int NULL,
  InfantPrice int NULL,
  CONSTRAINT PK_Tour_ID PRIMARY KEY CLUSTERED (ID)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Status"
--
PRINT (N'Create table "dbo.Status"')
GO
CREATE TABLE dbo.Status (
  ID int NOT NULL,
  Name nvarchar(50) NULL,
  CONSTRAINT PK_Status_ID PRIMARY KEY CLUSTERED (ID)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Role"
--
PRINT (N'Create table "dbo.Role"')
GO
CREATE TABLE dbo.Role (
  ID int NOT NULL,
  Name varchar(50) NULL,
  CONSTRAINT PK_Role_ID PRIMARY KEY CLUSTERED (ID)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Reagent"
--
PRINT (N'Create table "dbo.Reagent"')
GO
CREATE TABLE dbo.Reagent (
  Id uniqueidentifier NOT NULL,
  Name nvarchar(50) NULL,
  Family nvarchar(50) NULL,
  AgencyName nvarchar(50) NULL,
  MobileNumber varchar(15) NULL,
  Phone varchar(15) NULL,
  Email varchar(50) NULL,
  CONSTRAINT PK_Reagent_Id PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Place"
--
PRINT (N'Create table "dbo.Place"')
GO
CREATE TABLE dbo.Place (
  Id uniqueidentifier NOT NULL,
  Name nvarchar(50) NULL,
  CONSTRAINT PK_Place_Id PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Hotel"
--
PRINT (N'Create table "dbo.Hotel"')
GO
CREATE TABLE dbo.Hotel (
  ID uniqueidentifier NOT NULL,
  Name nvarchar(50) NULL,
  CONSTRAINT PK_Hotel_ID PRIMARY KEY CLUSTERED (ID)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Destination"
--
PRINT (N'Create table "dbo.Destination"')
GO
CREATE TABLE dbo.Destination (
  ID uniqueidentifier NOT NULL,
  Name nvarchar(50) NULL,
  CONSTRAINT PK_Destination_ID PRIMARY KEY CLUSTERED (ID)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Customer"
--
PRINT (N'Create table "dbo.Customer"')
GO
CREATE TABLE dbo.Customer (
  Id uniqueidentifier NOT NULL,
  Name nvarchar(50) NULL,
  Family nvarchar(50) NULL,
  MobileNumber varchar(50) NULL,
  NationalCode nvarchar(50) NULL,
  BirthDate date NULL,
  PassportExpireDate date NULL,
  PassportNo varchar(50) NULL,
  CONSTRAINT PK_Customer_Id PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Currency"
--
PRINT (N'Create table "dbo.Currency"')
GO
CREATE TABLE dbo.Currency (
  ID int NOT NULL,
  Name nvarchar(50) NULL,
  Factor nvarchar(50) NULL,
  CONSTRAINT PK_ID PRIMARY KEY CLUSTERED (ID)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.Block"
--
PRINT (N'Create table "dbo.Block"')
GO
CREATE TABLE dbo.Block (
  ID uniqueidentifier NOT NULL,
  Code nvarchar(50) NULL,
  TourID uniqueidentifier NULL,
  PresenterUID uniqueidentifier NULL,
  Price int NULL,
  Capacity int NULL,
  HotelID uniqueidentifier NULL,
  Parent uniqueidentifier NULL,
  CONSTRAINT PK_Coppon_ID PRIMARY KEY CLUSTERED (ID)
)
ON [PRIMARY]
GO

--
-- Create table "dbo.PriceDetail"
--
PRINT (N'Create table "dbo.PriceDetail"')
GO
CREATE TABLE dbo.PriceDetail (
  ID uniqueidentifier NOT NULL,
  Price int NULL,
  CurrencyID int NULL,
  CONSTRAINT PK_PriceDetail_ID PRIMARY KEY CLUSTERED (ID)
)
ON [PRIMARY]
GO
-- 
-- Dumping data for table Block
--
-- Table Tourine.dbo.Block does not contain any data (it is empty)
-- 
-- Dumping data for table Currency
--
INSERT dbo.Currency VALUES (1, N'تومان', N'1')
INSERT dbo.Currency VALUES (2, N'دلار', N'4000')
GO
-- 
-- Dumping data for table Customer
--
-- Table Tourine.dbo.Customer does not contain any data (it is empty)
-- 
-- Dumping data for table Destination
--
INSERT dbo.Destination VALUES ('c13edcf1-9a29-4a8e-9bd4-3521ce7b5390', N'نجف')
INSERT dbo.Destination VALUES ('c13edcf1-9a29-4a8e-9bd4-3521ce7b5391', N'کربلا')
INSERT dbo.Destination VALUES ('c13edcf1-9a29-4a8e-9bd4-3521ce7b5392', N'مکه')
INSERT dbo.Destination VALUES ('c13edcf1-9a29-4a8e-9bd4-3521ce7b5393', N'سوریه')
GO
-- 
-- Dumping data for table Hotel
--
-- Table Tourine.dbo.Hotel does not contain any data (it is empty)
-- 
-- Dumping data for table Place
--
INSERT dbo.Place VALUES ('c13edcf1-9a29-4a8e-9bd4-3521ce1b5391', N'مشکوکات')
INSERT dbo.Place VALUES ('c13edcf1-9a29-4a8e-9bd4-3527ce7b5391', N'نریمان')
GO
-- 
-- Dumping data for table PriceDetail
--
INSERT dbo.PriceDetail VALUES ('c13edcf1-9a29-4a8e-9bd4-3521ce7b5091', 4000, 1)
GO
-- 
-- Dumping data for table Reagent
--
-- Table Tourine.dbo.Reagent does not contain any data (it is empty)
-- 
-- Dumping data for table Role
--
INSERT dbo.Role VALUES (1, N'Admin')
INSERT dbo.Role VALUES (2, N'User')
INSERT dbo.Role VALUES (3, N'Guest')
GO
-- 
-- Dumping data for table Status
--
INSERT dbo.Status VALUES (1, N'منقضی')
INSERT dbo.Status VALUES (2, N'درحال برگزاری')
INSERT dbo.Status VALUES (3, N'درحال تکمیل')
GO
-- 
-- Dumping data for table Tour
--
INSERT dbo.Tour VALUES ('c13edcf1-9a29-4a8e-9bd4-3521ce7b5364', N'1001', 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5391', 100, 3, 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5091', 5, '2018-01-16 14:25:12.913', 'c13edcf1-9a29-4a8e-9bd4-3521ce1b5391', CONVERT(bit, 'True'), 80, 80000, 50000, 45000, 35000, 65000)
INSERT dbo.Tour VALUES ('2a8a3b8e-636b-47d6-8449-44bac8adae45', N'1900', 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5390', 300, NULL, 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5091', 15, '2019-01-16 14:25:12.913', 'c13edcf1-9a29-4a8e-9bd4-3527ce7b5391', CONVERT(bit, 'True'), 260, 1000000, 120000, 650000, 100000, 750000)
INSERT dbo.Tour VALUES ('57d6d97e-84e0-4ba0-8b2d-75b3dd77e87e', N'1900', 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5390', 300, NULL, 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5091', 15, '2019-01-16 14:25:12.913', 'c13edcf1-9a29-4a8e-9bd4-3527ce7b5391', CONVERT(bit, 'True'), 260, 1000000, 120000, 650000, 100000, 750000)
INSERT dbo.Tour VALUES ('b290cb2e-6257-462b-9020-bcd4e8c453f1', N'1909', 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5390', 300, NULL, 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5091', 15, '2019-01-16 14:25:12.913', 'c13edcf1-9a29-4a8e-9bd4-3527ce7b5391', CONVERT(bit, 'False'), 260, 1000000, 120000, 650000, 100000, 750000)
INSERT dbo.Tour VALUES ('5fdafc2f-44c8-4c31-9abb-c5d3d18f60a6', N'1900', 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5390', 300, NULL, 'c13edcf1-9a29-4a8e-9bd4-3521ce7b5091', 15, '2019-01-16 14:25:12.913', 'c13edcf1-9a29-4a8e-9bd4-3527ce7b5391', CONVERT(bit, 'True'), 260, 1000000, 120000, 650000, 100000, 750000)
GO
-- 
-- Dumping data for table [User]
--
INSERT dbo.[User] VALUES ('c13edcf1-9a29-4a8e-9bd4-3521ce7b5362', N'علی', 1)
INSERT dbo.[User] VALUES ('c13edcf1-9a29-4a8e-9bd4-3521ce7b5363', N'Emad', 2)
GO
-- 
-- Dumping data for table VersionInfo
--
INSERT dbo.VersionInfo VALUES (20171007214500, '2017-12-31 19:04:56.993', N'Initial')
GO

USE Tourine
GO

IF DB_NAME() <> N'Tourine' SET NOEXEC ON
GO

--
-- Create foreign key "FK_PriceDetail_Currency_ID" on table "dbo.PriceDetail"
--
PRINT (N'Create foreign key "FK_PriceDetail_Currency_ID" on table "dbo.PriceDetail"')
GO
ALTER TABLE dbo.PriceDetail
  ADD CONSTRAINT FK_PriceDetail_Currency_ID FOREIGN KEY (CurrencyID) REFERENCES dbo.Currency (ID)
GO

--
-- Create foreign key "FK_User_Role_ID" on table "dbo.[User]"
--
PRINT (N'Create foreign key "FK_User_Role_ID" on table "dbo.[User]"')
GO
ALTER TABLE dbo.[User]
  ADD CONSTRAINT FK_User_Role_ID FOREIGN KEY (RoleID) REFERENCES dbo.Role (ID)
GO

--
-- Create foreign key "FK_Tour_Destination_ID" on table "dbo.Tour"
--
PRINT (N'Create foreign key "FK_Tour_Destination_ID" on table "dbo.Tour"')
GO
ALTER TABLE dbo.Tour
  ADD CONSTRAINT FK_Tour_Destination_ID FOREIGN KEY (DestinationID) REFERENCES dbo.Destination (ID)
GO

--
-- Create foreign key "FK_Tour_Place_Id" on table "dbo.Tour"
--
PRINT (N'Create foreign key "FK_Tour_Place_Id" on table "dbo.Tour"')
GO
ALTER TABLE dbo.Tour
  ADD CONSTRAINT FK_Tour_Place_Id FOREIGN KEY (PlaceID) REFERENCES dbo.Place (Id)
GO

--
-- Create foreign key "FK_Tour_PriceDetail_ID" on table "dbo.Tour"
--
PRINT (N'Create foreign key "FK_Tour_PriceDetail_ID" on table "dbo.Tour"')
GO
ALTER TABLE dbo.Tour
  ADD CONSTRAINT FK_Tour_PriceDetail_ID FOREIGN KEY (PriceDetailID) REFERENCES dbo.PriceDetail (ID)
GO

--
-- Create foreign key "FK_Tour_Status_ID" on table "dbo.Tour"
--
PRINT (N'Create foreign key "FK_Tour_Status_ID" on table "dbo.Tour"')
GO
ALTER TABLE dbo.Tour
  ADD CONSTRAINT FK_Tour_Status_ID FOREIGN KEY (StatusID) REFERENCES dbo.Status (ID)
GO

--
-- Create foreign key "FK_Block_Block_ID" on table "dbo.Block"
--
PRINT (N'Create foreign key "FK_Block_Block_ID" on table "dbo.Block"')
GO
ALTER TABLE dbo.Block WITH CHECK
  ADD CONSTRAINT FK_Block_Block_ID FOREIGN KEY (Parent) REFERENCES dbo.Block (ID)
GO

--
-- Create foreign key "FK_Block_Hotel_ID" on table "dbo.Block"
--
PRINT (N'Create foreign key "FK_Block_Hotel_ID" on table "dbo.Block"')
GO
ALTER TABLE dbo.Block
  ADD CONSTRAINT FK_Block_Hotel_ID FOREIGN KEY (HotelID) REFERENCES dbo.Hotel (ID)
GO

--
-- Create foreign key "FK_Block_Tour_ID" on table "dbo.Block"
--
PRINT (N'Create foreign key "FK_Block_Tour_ID" on table "dbo.Block"')
GO
ALTER TABLE dbo.Block
  ADD CONSTRAINT FK_Block_Tour_ID FOREIGN KEY (TourID) REFERENCES dbo.Tour (ID)
GO

--
-- Create foreign key "FK_Block_User_ID" on table "dbo.Block"
--
PRINT (N'Create foreign key "FK_Block_User_ID" on table "dbo.Block"')
GO
ALTER TABLE dbo.Block
  ADD CONSTRAINT FK_Block_User_ID FOREIGN KEY (PresenterUID) REFERENCES dbo.[User] (ID)
GO
SET NOEXEC OFF
GO